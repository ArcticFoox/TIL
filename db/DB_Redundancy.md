# DB 이중화

Database Redundancy 또는 Database High Availability, HA는 데이터 베이스의 가용성, 무결성, 안정성을 높이기 위해 동일한 데이터를 여러 시스템에 복제하거나, 장애 발생 시에도 서비스를 지속할 수 있도록 구성하는 방식

장애 발생 시에도 데이터 유실 없이 빠르게 복구하거나 서비스 중단을 최소화하기 위한 구조

## 이중화의 필요성

| 요구 사항 | 설명 |
| --- | --- |
| **고가용성** | DB 장애 발생 시 자동으로 대체 시스템으로 전환되도록 하여, 다운타임 최소화 |
| **데이터 무결성** | 데이터 손실 없이 복구 가능해야 함 |
| **부하 분산** | 읽기/쓰기 트래픽을 나누어 성능을 향상시킴 |
| **백업 및 복구** | 장애 대비를 위한 주기적인 백업 및 빠른 복구 체계 |

## 방식

### Active-Standby

한 노드만 쓰기를 수행하고, 나머지는 대기 또는 읽기만 수행

Primary(Master): 모든 쓰기/읽기 작업 수행

Replica(Standby/Slave): Primary에서 변경된 데이터를 복제만 받음(읽기 전용 가능)

Failover: Primary 장애 시 Replica가 Primary로 전환됨

**장점**

복제 구조가 단순

쓰기 성능 최적화

**단점**

쓰기 병목 현상 발생 가능성(쓰기 노드 1개)

Failover 시 시간 지연 가능성

### Active-Active

모든 노드가 읽기와 쓰기 처리를 수행하고 서로 동기화

데이터는 양방향 복제

로드 밸런싱 가능

**장점**

고성능, 높은 확장성

하나의 노드 장애 시에도 다른 노드가 즉시 처리 가능

**단점**

충돌 처리 어려움(쓰기 충돌, 동기화 지연 등)

복잡한 트랜잭션 관리

### Shared Storage

여러 DB 인스턴스가 하나의 저장소를 공유

Oracle RAC나 일부 엔터프라이즈 솔루션에서 사용

**장점**

모든 노드에서 동일한 데이터 접근 가능

**단점**

스토리지 자체의 SPOF(Single Point of Failure) 위험 존재

## 복제 방식

| 방식 | 설명 | 특징 |
| --- | --- | --- |
| **비동기 복제 (Asynchronous)** | Master가 쓰기 후 복제 진행 | 성능 우수하지만 장애 시 데이터 유실 가능 |
| **반동기 복제 (Semi-synchronous)** | 쓰기 트랜잭션 완료 전에 최소한 하나의 Replica에 복제 완료 | 절충형 |
| **동기 복제 (Synchronous)** | 모든 Replica에 반영된 후 트랜잭션 완료 | 데이터 유실 없음, 쓰기 성능 저하 가능 |

## 전환 방식

Failover: 장애 시 자동으로 대기 노드로 전환

Switchover: 계획된 전환, 수동으로 Primary와 Replica를 교체