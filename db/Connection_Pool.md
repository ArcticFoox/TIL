# Connection Pool

데이터베이스와의 연결을 미리 여러 개 만들어 풀(Pool)에 보관해두고,

애플리케이션이 DB에 접근할 때마다 매번 새로 연결하지 않고 풀에서 꺼내서 재사용하는 방식

## 필요성

DB에 연결을 생성하는 작업은 네트워크 I/O, 인증, 세션 생성 등 비용이 큰 작업

요청마다 새로 연결하면 성능 저하, 과부하, 리소스 낭비 발생

많은 사용자가 동시에 요청을 보낼 때 즉각적인 응답을 위해 미리 생성된 연결을 사용하는 것이 효율적

## 동작 원리

애플리케이션이 시작되면서 미리 일정 수의 DB 커넥션 생성

이 커넥션들을 풀(Pool)에 보관

사용자가 DB 접근 시

- 풀에서 유휴 커넥션을 할당
- 사용이 끝나면 닫지 않고 반납

요청이 많아 풀에 커넥션이 부족할 때

- 최대 커넥션 수 제한까지 추가 생성
- 대기하거나 실패 처리

## 종류

HikariCP: Spring Boot 기본 사용

Tomcat JDBC Pool: Tomcat 내장

Apache DBCP: 오래된 표준

C3P0: 다양한 설정 지원

## 주요 설정 항목

| 설정 항목 | 설명 |
| --- | --- |
| `maximumPoolSize` | 동시에 유지할 수 있는 최대 커넥션 수 |
| `minimumIdle` | 유휴 상태로 유지할 커넥션 수 |
| `connectionTimeout` | 풀에서 커넥션을 얻기까지 기다리는 최대 시간 |
| `idleTimeout` | 유휴 커넥션을 닫기까지의 시간 |
| `maxLifetime` | 커넥션의 최대 생존 시간 (DB에서 타임아웃 방지) |
| `validationQuery` | 커넥션 유효성 확인 쿼리 (예: `SELECT 1`) |